template(name='color_edit')
    .ui.large.form
        .field
            label 
                if icon
                    i.grey.icon(class=icon)
                if label
                    |#{label}
                else if key
                    |#{key}
                else
                    |#{this}
            input.edit_color(type='color' value=field_value placeholder='color')

template(name='color_view')
    .ui.form
        .field
            label 
                if icon
                    i.grey.icon(class=icon)
                if label
                    |#{label}
                else if key
                    |#{key}
                else
                    |#{this}
            .ui.large.label(style="background:#{field_value}")
            |#{field_value}

template(name='color_icon_edit')
    .ui.form
        .field
            label 
                if icon
                    i.grey.icon(class=icon)
                if label
                    |#{label}
                else if key
                    |#{key}
                else
                    |#{this}
            input.color_icon(type='url' value=field_value placeholder='icons8 class')
        if field_value
            img.ui.inline.image(src="https://img.icons8.com/color/48/000000/#{field_value}.png")

template(name='icon_edit')
    .ui.form
        .field
            label 
                if icon
                    i.grey.icon(class=icon)
                if label
                    |#{label}
                else if key
                    |#{key}
                else
                    |#{this}
            input.icon_val(type='text' value=field_value placeholder='font awesome class')
        if field_value
            i.icon(class=field_value)


template(name='color_icon_view')
    if field_value
        img(src="https://img.icons8.com/color/48/000000/#{field_value}.png")

template(name='icon_view')
    if field_value
        i.icon(class=field_value)


template(name='icolor')
    img(src="https://img.icons8.com/color/48/000000/#{name}.png" class=classes)

template(name='iblue')
    img(src="https://img.icons8.com/ultraviolet/40/000000/#{name}.png" class=classes)

template(name='iflat')
    img.ui.mini.image(src="https://img.icons8.com/flat_round/64/000000/#{name}.png")

template(name='ioffice')
    img.ui.image(src="https://img.icons8.com/office/30/000000/#{name}.png" class=classes)

template(name='link_edit')
    .ui.form
        .field
            label 
                if icon
                    i.grey.icon(class=icon)
                |#{label}
            input.edit_url(type='url' value=field_value placeholder='url')
        // +call_watson mode='url'


template(name='link_view')
    .ui.small.grey.header 
        if icon
            i.grey.icon(class=icon)
        |#{label}
    a(href=field_value target='_window') #{field_value}


template(name='image_view')
    img.ui.large.centered.rounded.image(src="{{c.url field_value width=400 gravity='face' crop='fill'}}")
    +call_visual

template(name='image_edit')
    .ui.form
        .field
            if field_value
                label Image
                img.ui.large.image(src="{{c.url field_value height=500 crop='limit'}}")
                a#remove_photo.ui.right.corner.link.label
                    i.remove.red.link.icon
            else
                if icon
                    i.grey.icon(class=icon)
                |#{label}
                if is_dev
                    input.cloudinary_id(type='text' value=field_value placeholder='cloudinary_id')
                // else
                //     label Upload Image
                input(type='file' name='upload_image' accept='image/*')


template(name='image_link_edit')
    .ui.labeled.icon.fluid.input
        .ui.label image link
        i.image.icon
        input.edit_image_link(type='link' value=field_value placeholder='image link' )
    if field_value
        img.ui.fluid.image(src=field_value)
    // +call_visual


template(name='image_link_view')
    img.ui.image(src=field_value)







template(name='textarea_view')
    .ui.unstyled.accordion
        .active.title
            |content
            //- if label
            //-     |#{label}
            //- else if key
            //-     |#{key}
            //- else
            //-     |#{this}
            i.dropdown.icon
        .active.content
            if field_value
                |#{nl2br field_value}
                +call_watson mode='text' key=key
    


template(name='textarea_edit')
    .ui.form
        .field
            label 
                if icon
                    i.grey.icon(class=icon)
                if label
                    |#{label}
                else if key
                    |#{key}
                else
                    |#{this}
            textarea.edit_textarea(rows='5') #{field_value}
        +call_watson mode='text' key=key


template(name='html_edit')
    .ui.form
        .field
            label 
                if icon
                    i.grey.icon(class=icon)
                if label
                    |#{label}
                else if key
                    |#{key}
                else
                    |#{this}
    .froala-container
        +froalaReactive getFEContext
    +call_watson mode='html'
    +tone mode='html'


template(name='html_view')
    .ui.accordion
        .active.title
            large content
            i.dropdown.icon
        .active.content
            |!{field_value}
            +call_watson mode='html'


template(name='doc_edit')
    // .ui.labeled.fluid.input
    //     .ui.label 
    //         // if icon
    //         //     i.grey.icon(class=icon)
    //         if label
    //             |#{label}
    //         else
    //             |#{key}
    //     input.edit_text(type='text' value=field_value placeholder=placeholder)
    with referenced_document
        .ui.styled.fluid.accordion
            .title 
                .ui.header #{label}
                    i.dropdown.icon
            .content 
                |!{html}

template(name='doc_view')
    .ui.styled.fluid.accordion
        .title 
            .ui.header #{label}
                i.dropdown.icon
        .content 
            |!{referenced_document.html}
        




template(name='text_edit')
    .ui.form
        .field
            if icon
                i.grey.icon(class=icon)
            label 
                if label
                    |#{label}
                else if key
                    |#{key}
            input.edit_text(type='text' value=field_value placeholder=placeholder)

template(name='text_view')
    if field_value
        unless header
            div
            // if icon
            //     i.grey.icon(class=icon)
            | &nbsp;
            if label
                |#{label}
            else if key
                |#{key}
            else
                |#{this}
        .ui.inline.small.header #{field_value}


template(name='phone_edit')
    .ui.labeled.input
        // if icon
        //     i.grey.icon(class=icon)
        .ui.label 
            if label
                |#{label}
            else if key
                |#{key}
            else
                |#{this}
        input.edit_phone(type='tel' value=field_value placeholder=placeholder)

template(name='phone_view')
    if field_value
        unless header
            div
            // if icon
            //     i.grey.icon(class=icon)
            if label
                |#{label}
            else if key
                |#{key}
            else
                |#{this}
        strong &nbsp; #{field_value}





template(name='code_edit')
    .ui.header ace
    #ace



template(name='number_edit')
    .ui.labeled.input
        .ui.label
            // if icon
            //     i.grey.icon(class=icon)
            |#{label}
        input.edit_number(type='number' value=field_value placeholder=placeholder)

template(name='number_view')
    div
    if icon
        i.grey.icon(class=icon)
    if label
        |#{label}
    else
        |#{this}
    strong &nbsp; #{field_value}





template(name='date_edit')
    .ui.form
        .field
            label 
                if label
                    |#{label}
                else if key
                    |#{key}
                else
                    |#{this}
            input.edit_date(type='date' value=field_value placeholder=placeholder)


template(name='date_view')
    if icon
        i.grey.icon(class=icon)
    if label
        |#{label}
    else if key
        |#{key}
    else
        |#{this}
    strong &nbsp; #{field_value}






template(name='time_edit')
    .ui.form
        .field
            label 
                if label
                    |#{label}
                else
                    |#{key}
            input.edit_time(type='time' value=field_value placeholder=placeholder)


template(name='time_view')
    if icon
        i.grey.icon(class=icon)

    if label
        |#{label}
    else if key
        |#{key}
    else
        |#{this}
    strong &nbsp; #{field_value}





template(name='datetime_edit')
    .ui.form
        .field
            label 
                if label
                    |#{label}
                else
                    |#{key}
            input.edit_datetime(type='datetime' value=field_value placeholder=placeholder)


template(name='datetime_view')
    if icon
        i.grey.icon(class=icon)
    if label
        |#{label}
    else if key
        |#{key}
    else
        |#{this}
    strong &nbsp; #{field_value}







template(name='array_edit')
    .ui.form
        .field
            label 
                if icon
                    i.grey.icon(class=icon)
                if label
                    |#{label}
                else if key
                    |#{key}
            input.new_element(type='text' placeholder='+')
    if field_value
        each field_value
            .ui.large.label
                i.delete.icon.remove_element
                |#{this}


template(name='array_view')
    if field_value
        div 
            // if icon
            //     i.grey.icon(class=icon)
            if label
                |#{label}
            else if key
                |#{key}
            else
                |#{this}
            each field_value
                .ui.large.label #{this}







template(name='children_edit')
    .ui.small.grey.header #{label}
    .ui.button.add_child
        i.plus.icon
        |Add Child #{ref_schema}
    .ui.styled.fluid.accordion
        each children
            +child_edit


template(name='child_edit')
    .title
        i.dropdown.icon
        |#{rank} #{title} #{label}
    .content
        each bricks
            +Template.dynamic template=edit_template 
        div
        +remove_button

        // .ui.red.segment
        //     +text_edit key='key'
        //     // +text_edit key='field'
        //     +single_doc_edit key='field' ref_schema='field' ref_key='slug' label='Field Type'
        //     +text_edit key='label'
        //     +text_edit key='icon'
        //     if icon
        //         i.big.icon(class=icon)
        //     // if is_reference
    
        //     +single_doc_edit key='ref_schema' ref_schema='schema' ref_key='slug' label='Referenced Schema (if ref)'
        //     .ui.divider




template(name='children_view')
    .ui.accordion
        .title
            if label
                |#{label}
            else if key
                |#{key}
            else
                |#{this}
            i.dropdown.icon
        .content
            each children
                .ui.fluid.secondary.segment
                    +child_view


template(name='child_view')
    each bricks
        // if field_template
        //     .ui.header field template #{field_template}
        // else 
        +Template.dynamic template=view_template 

        // .ui.red.segment
        //     +text_edit key='key'
        //     // +text_edit key='field'
        //     +single_doc_edit key='field' ref_schema='field' ref_key='slug' label='Field Type'
        //     +text_edit key='label'
        //     +text_edit key='icon'
        //     if icon
        //         i.big.icon(class=icon)
        //     // if is_reference
    
        //     +single_doc_edit key='ref_schema' ref_schema='schema' ref_key='slug' label='Referenced Schema (if ref)'
        //     .ui.divider







template(name='youtube_edit')
    .ui.labeled.fluid.input
        .ui.label 
            // if icon
            //     i.grey.icon(class=icon)
            |Youtube Id
        input.youtube_id(type='text' value=field_value placeholder=placeholder)
    if field_value
        iframe(width='560' height='315' src="https://www.youtube.com/embed/#{field_value}" frameborder='0' allow='accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture' allowfullscreen='')

template(name='youtube_view')
    if field_value
        if icon
            i.grey.icon(class=icon)
        .ui.embed(data-source="youtube" data-id=field_value)

        //- // iframe(width='560' height='315' src="https://www.youtube.com/embed/#{field_value}" frameborder='0' allow='accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture' allowfullscreen='')
        //- iframe(src="https://www.youtube.com/embed/#{field_value}" frameborder='0' allow='accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture' allowfullscreen='')





template(name='boolean_edit')
    div
        .ui.button.toggle_boolean(class=boolean_toggle_class title=key)
            if label
                |#{label}
            else if key
                |#{key}
            else
                |#{this}


template(name='boolean_view')
    div 
    if icon
        i.grey.icon(class=icon)

    //- |#{label}: &nbsp;
    if field_value
        if label
            |#{label}
        else if key
            |#{key}
        else
            |#{this}
        i.checkmark.green.spaced.icon
    else
        if label
            |#{label}
        else if key
            |#{key}
        else
            |#{this}
        i.cancel.spaced.icon


template(name='single_doc_view')
    div
    if icon
        i.grey.icon(class=icon)
    .ui.small.inline.header(title=key)
        |#{label}
    .ui.label
        if icon
            i.grey.icon(class=icon)
        |#{field_value}
    div


template(name='single_doc_edit')
    div
    .ui.small.inline.header(title=key) 
        if icon
            i.grey.icon(class=icon)
        |#{label}
    each choices
        .ui.compact.button.select_choice(class=choice_class)
            if icon
                i.grey.icon(class=icon)
            |#{title}
            |#{key}
            |#{username}
    div


template(name='multi_doc_edit')
    div
    if icon
        i.grey.icon(class=icon)
    .ui.small.inline.header(title=key)
        |#{label}
    each choices
        .ui.compact.button.select_choice(class=choice_class)
            if icon
                i.grey.icon(class=icon)
            |#{title}
            |#{key}
            |#{username}
    // .ui.sub.header 
    //     if icon
    //         i.grey.icon(class=icon)
    //     |#{label}
    // select.ui.fluid.multiple.selection.dropdown(multiple='')
    //     each choices
    //         option(value=slug) #{title}
    // .ui.fluid.multiple.selection.dropdown
        // input(type='hidden' name='multi_doc_edit')
        // i.dropdown.icon
        // .default.text 
        //     |#{label}
        // .menu
        //     each choices
        //         .item(data-value=slug) 
        //             if icon
        //                 i.grey.icon(class=icon)
        //             |#{title}

    
    
    
    

template(name='multi_doc_view')
    if icon
        i.grey.icon(class=icon)
    .ui.small.inline.header(title=key)
        |#{label}
    each field_value
        .ui.label
            |#{this}
    div



template(name='single_user_edit')
    .ui.form
        .field.attached
            label #{key}
            input#single_user_select_input(type='text' placeholder='Lookup User...')
            each selections
                .ui.large.label
                    |#{username} #{profile.name}
        if user_results
            .ui.top.attached.segment
                .ui.middle.aligned.selection.animated.list
                    each user_results
                        .select_user.item
                            h5.ui.header
                                img.ui.avatar.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                                |#{username}
        .field
            +user_info field_value
            // .ui.list
            //     each field_value
            //         |#{this}
            //         .item
            //             .right.floated.content
            //                 i.pull_user.remove.link.icon
            //             .image
            //                 img.ui.avatar.image(src="{{c.url image_id width=100 height=100 gravity='face' crop='fill'}}")
            //             .content
            //                 h4.ui.header
            //                     |#{first_name} #{last_name}
            //                     small @#{username}


template(name='single_user_view')
    .ui.form
        each selections
            .ui.large.label
                |#{username} #{profile.name}
        .field
            +user_info field_value


template(name='single_person_view')
    div
    .ui.small.grey.header #{label}
    if field_value
        +person_card field_value
    div
            
            
template(name='single_person_edit')
    .ui.small.grey.header #{label}
    .ui.form
        if field_value
            +person_card field_value
            .ui.circlar.button.clear_selection
                i.remove.icon
                |Clear
        else
            .field.attached
                input#single_person_select_input(type='text' placeholder='Lookup Username...')
            if person_results
                .ui.top.attached.segment
                    .ui.middle.aligned.selection.animated.large.list
                        each person_results
                            .select_person.item
                                h3.ui.header
                                    if image
                                        img.ui.avatar.image(src="{{c.url image width=100 height=100 gravity='face' crop='fill'}}")
                                    //- else
                                    //-     i.user.icon
                                    strong &nbsp; #{first_name} #{last_name}
                                    small @#{username}
                                .ui.sub.header #{building_number} #{address}
            else
                .ui.header No results
            // .ui.list
            //     each field_value
            //         |#{this}
            //         .item
            //             .right.floated.content
            //                 i.pull_user.remove.link.icon
            //             .image
            //                 img.ui.avatar.image(src="{{c.url image_id width=100 height=100 gravity='face' crop='fill'}}")
            //             .content
            //                 h4.ui.header
            //                     |#{first_name} #{last_name}
            //                     small @#{username}


template(name='multi_user_edit')
    .ui.basic.segment
        .ui.form
            .field.attached
                label #{key}
                input#multi_user_select_input(type='text' placeholder='Lookup User...')
                each selections
                    .ui.large.label
                        |#{username} #{profile.name}
            if user_results
                .ui.top.attached.segment
                    .ui.middle.aligned.selection.animated.list
                        each user_results
                            .select_user.item
                                h5.ui.header
                                    img.ui.avatar.image(src="{{c.url image_id width=100 height=100 gravity='face' crop='fill'}}")
                                    |#{username}
            .ui.list
                each field_value
                    // |#{this}
                    with user_from_id
                        .item
                            .right.floated.content
                                i.pull_user.remove.link.icon
                            .image
                                img.ui.avatar.image(src="{{c.url image_id width=100 height=100 gravity='face' crop='fill'}}")
                            .content
                                h4.ui.header
                                    |#{first_name} #{last_name}
                                    small @#{username}
    
    
    
    
